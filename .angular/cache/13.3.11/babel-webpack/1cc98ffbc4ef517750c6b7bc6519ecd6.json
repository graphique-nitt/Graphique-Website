{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { certiAttributesMapping } from './certificate.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"ng-google-sheets-db\";\nimport * as i4 from \"@angular/common\";\n\nfunction VerifyCertDirectComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15)(2, \"span\", 16);\n    i0.ɵɵtext(3, \"Searching\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"div\", 17)(5, \"div\", 18)(6, \"div\", 19);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function () {\n  return [\"fas\", \"times\"];\n};\n\nconst _c1 = function () {\n  return [\"fas\", \"arrow-left\"];\n};\n\nfunction VerifyCertDirectComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"h2\");\n    i0.ɵɵelement(2, \"fa-icon\", 21);\n    i0.ɵɵtext(3, \" This is not a valid certificate. \");\n    i0.ɵɵelement(4, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 23)(6, \"button\");\n    i0.ɵɵelement(7, \"fa-icon\", 24);\n    i0.ɵɵtext(8, \" Go back\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", i0.ɵɵpureFunction0(2, _c0));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"icon\", i0.ɵɵpureFunction0(3, _c1));\n  }\n}\n\nfunction VerifyCertDirectComponent_div_16_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"span\", 39);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3, \"Loading Certificate \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c2 = function () {\n  return [\"fas\", \"check\"];\n};\n\nconst _c3 = function () {\n  return [\"fas\", \"download\"];\n};\n\nfunction VerifyCertDirectComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26);\n    i0.ɵɵtemplate(2, VerifyCertDirectComponent_div_16_div_2_Template, 5, 0, \"div\", 27);\n    i0.ɵɵelementStart(3, \"div\", 28)(4, \"img\", 29);\n    i0.ɵɵlistener(\"load\", function VerifyCertDirectComponent_div_16_Template_img_load_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.certImageLoadedHandler();\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"div\", 30)(6, \"h2\");\n    i0.ɵɵelement(7, \"fa-icon\", 31);\n    i0.ɵɵtext(8, \" This is a valid certificate. \");\n    i0.ɵɵelement(9, \"img\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 33);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 34)(13, \"div\", 35)(14, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function VerifyCertDirectComponent_div_16_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.download();\n    });\n    i0.ɵɵelement(15, \"fa-icon\", 24);\n    i0.ɵɵtext(16, \" Download\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"a\", 37)(18, \"button\");\n    i0.ɵɵelement(19, \"fa-icon\", 24);\n    i0.ɵɵtext(20, \" Search another\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.certImageLoaded);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.certificateImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", i0.ɵɵpureFunction0(10, _c2));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate3(\"This certificate was issued to \", ctx_r2.name, \" (\", ctx_r2.rollnumber, \") for \", ctx_r2.eventname, \".\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.isFileDownloading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", i0.ɵɵpureFunction0(11, _c3));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.isFileDownloading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", i0.ɵɵpureFunction0(12, _c1));\n  }\n}\n\nconst FileSaver = require('file-saver');\n\nexport let VerifyCertDirectComponent = /*#__PURE__*/(() => {\n  class VerifyCertDirectComponent {\n    constructor(route, httpclient, router, googleSheetsDbService) {\n      this.route = route;\n      this.httpclient = httpclient;\n      this.router = router;\n      this.googleSheetsDbService = googleSheetsDbService;\n      this.certID = '';\n      this.certificateImage = '';\n      this.rollnumber = \"\";\n      this.certImageLoaded = false; //stateManagers\n\n      this.isSearching = false;\n      this.isFileDownloading = false;\n      this.isCertificateValid = false; //\n\n      this.searchParam = \"\";\n      this.active = \"no\";\n      this.certificateid = \"\";\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.certID = this.route.snapshot.paramMap.get('certID');\n        yield this.googleSheetsDbService.getActive('1C0UXdTKzVg1cvDZzoulxU1hcXDw_BGNdiMCHzE3Wg3M', 'Details', certiAttributesMapping, 'Active').toPromise().then(res => {\n          this.certificate = res;\n        });\n        this.verifyCertificate();\n      });\n    }\n\n    verifyCertificate() {\n      for (let i = 0; i < this.certificate.length; i++) {\n        if (this.certID === this.certificate[i].certificateid) {\n          this.isCertificateValid = true;\n          this.certificateImage = this.certificate[i].certimage;\n          this.name = this.certificate[i].name;\n          this.rollnumber = this.certificate[i].rollnumber;\n          this.eventname = this.certificate[i].eventname;\n          this.certImageLoadedHandler();\n        }\n      }\n    }\n\n    certImageLoadedHandler() {\n      console.log(\"imageLoaded\");\n      this.certImageLoaded = true;\n    }\n\n    download() {\n      this.isFileDownloading = true;\n      this.httpclient.get(this.certificateImage, {\n        observe: 'response',\n        responseType: 'blob'\n      }).subscribe(res => {\n        console.log(res);\n        FileSaver.saveAs(res.body, this.name + \" - \" + this.eventname);\n        this.isFileDownloading = false;\n      }, err => {\n        console.log(err.error);\n      });\n    }\n\n  }\n\n  VerifyCertDirectComponent.ɵfac = function VerifyCertDirectComponent_Factory(t) {\n    return new (t || VerifyCertDirectComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.GoogleSheetsDbService));\n  };\n\n  VerifyCertDirectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VerifyCertDirectComponent,\n    selectors: [[\"app-verify-cert-direct\"]],\n    decls: 17,\n    vars: 3,\n    consts: [[1, \"pt-0\"], [1, \"jumbotron\", \"jumbotron-fluid\", \"vh-75\", \"d-flex\", \"align-items-center\", \"bg-dark\", \"text-white\"], [1, \"bg\", 2, \"background-image\", \"url(assets/images/certificatepage.jpg)\"], [1, \"container\", \"text-center\"], [1, \"row\", \"justify-content-md-center\"], [1, \"col-sm-7\"], [1, \"massive\", \"in-left\", 2, \"font-size\", \"50px\", \"letter-spacing\", \"normal\", \"line-height\", \"50px\"], [1, \"in-top\", \"o-7\"], [1, \"container\", \"py-1\"], [1, \"row\", 2, \"margin-top\", \"50px\"], [1, \"offset-sm-2\", \"col-sm-8\"], [\"class\", \"searchingSpinner\", 4, \"ngIf\"], [\"class\", \"resultFailure\", 4, \"ngIf\"], [\"class\", \"resultSuccess\", 4, \"ngIf\"], [1, \"searchingSpinner\"], [1, \"searchSpinnerBox\"], [2, \"z-index\", \"100\"], [1, \"blue-orbit\", \"leo\"], [1, \"green-orbit\", \"leo\"], [1, \"red-orbit\", \"leo\"], [1, \"resultFailure\"], [1, \"redCross\", 3, \"icon\"], [\"src\", \"https://img.icons8.com/emoji/48/000000/triangular-flag.png\"], [\"href\", \"/verify\"], [3, \"icon\"], [1, \"resultSuccess\"], [1, \"certificateImage\"], [\"class\", \"spinner-box\", 4, \"ngIf\"], [1, \"certificateContainer\"], [\"crossorigin\", \"anonymous\", \"id\", \"certImg\", \"ng-hide\", \"certImageLoaded\", 3, \"src\", \"load\"], [1, \"details\"], [1, \"greeenCheck\", 3, \"icon\"], [\"src\", \"https://img.icons8.com/emoji/48/000000/check-mark-button-emoji.png\"], [1, \"subtitle\"], [1, \"actions\"], [1, \"download\"], [3, \"disabled\", \"click\"], [\"href\", \"/verify\", 3, \"disabled\"], [1, \"spinner-box\"], [1, \"loadingText\"], [1, \"loading\"]],\n    template: function VerifyCertDirectComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\")(1, \"section\", 0)(2, \"div\", 1);\n        i0.ɵɵelement(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"h1\", 6);\n        i0.ɵɵtext(8, \"Certificate Verification\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p\", 7);\n        i0.ɵɵtext(10, \" Graphique issues certificates for various workshops & competitions. Each certificate will have a unique ID that can be verified on this website.\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9)(13, \"div\", 10);\n        i0.ɵɵtemplate(14, VerifyCertDirectComponent_div_14_Template, 7, 0, \"div\", 11);\n        i0.ɵɵtemplate(15, VerifyCertDirectComponent_div_15_Template, 9, 4, \"div\", 12);\n        i0.ɵɵtemplate(16, VerifyCertDirectComponent_div_16_Template, 21, 13, \"div\", 13);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSearching);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isCertificateValid && !ctx.isSearching && ctx.certID);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isCertificateValid);\n      }\n    },\n    directives: [i4.NgIf],\n    styles: [\"input[_ngcontent-%COMP%]:focus{outline:none}.content[_ngcontent-%COMP%]{width:60%;height:75%;background:#fff;border-radius:10px;top:50%;left:60%;transform:translate(-50%) translateY(-50%);box-shadow:0 0 20px #ff634755;z-index:100;padding:25px}.resultSuccess[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:30px 25px}.resultFailure[_ngcontent-%COMP%]{margin:30px 25px}.resultFailure[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:tomato;border-color:tomato;color:#fff;letter-spacing:0;font-weight:700;padding:15px;margin-bottom:25px}.details[_ngcontent-%COMP%]{float:left;width:70%;margin:30px;padding-left:30px;border-left:1px solid #0001;display:flex;flex-direction:column;justify-content:center}.certificateContainer[_ngcontent-%COMP%]{display:flex}.certificateImage[_ngcontent-%COMP%]{width:28em}.certificateImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;box-shadow:0 2px 19px 13px #00000040}.actions[_ngcontent-%COMP%]{display:flex}.share[_ngcontent-%COMP%]{margin-left:50px}.share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;padding:10px;border-radius:50px;border:none;height:50px;width:50px}.loading[_ngcontent-%COMP%]{display:inline-block;width:50px;height:50px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:spin 1s ease-in-out infinite;-webkit-animation:spin 1s ease-in-out infinite}.download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:tomato;border-color:tomato;color:#fff;letter-spacing:0;font-weight:700;padding:15px;margin-bottom:25px}.download[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:20px}.download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #000a}.download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ff9f8f;border-color:#ff9f8f;cursor:not-allowed}.spinner-box[_ngcontent-%COMP%]{position:absolute;top:40%;left:10%}.searchSpinnerBox[_ngcontent-%COMP%]{width:300px;height:300px;display:flex;justify-content:center;align-items:center;background-color:transparent;margin:0 auto}.searchingSpinner[_ngcontent-%COMP%]{text-align:center}.subtitle[_ngcontent-%COMP%]{color:#b4b4b4}.greeenCheck[_ngcontent-%COMP%]{color:#2e8b57}.redCross[_ngcontent-%COMP%]{color:#ff4500}.searchForm[_ngcontent-%COMP%]{display:flex;flex-direction:row}.searchForminput[_ngcontent-%COMP%]{height:50px;border-radius:5px;width:80%;margin-left:20px;border:none;padding-left:5px}.searchForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;border-radius:5px;background-color:tomato;border-color:tomato;color:#fff;letter-spacing:0;font-weight:700;margin-left:20px}@keyframes configure-clockwise{0%{transform:rotate(0)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}to{transform:rotate(360deg)}}@keyframes configure-xclockwise{0%{transform:rotate(45deg)}25%{transform:rotate(-45deg)}50%{transform:rotate(-135deg)}75%{transform:rotate(-225deg)}to{transform:rotate(-315deg)}}.configure-border-1[_ngcontent-%COMP%]{width:115px;height:115px;padding:3px;position:absolute;display:flex;justify-content:center;align-items:center;background:tomato;animation:configure-clockwise 3s ease-in-out 0s infinite alternate}.configure-border-2[_ngcontent-%COMP%]{width:115px;height:115px;padding:3px;left:-115px;display:flex;justify-content:center;align-items:center;background:tomato;transform:rotate(45deg);animation:configure-xclockwise 3s ease-in-out 0s infinite alternate}.configure-core[_ngcontent-%COMP%]{width:100%;height:100%;background-color:transparent}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.leo[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;border-radius:50%}.blue-orbit[_ngcontent-%COMP%]{width:165px;height:165px;border:1px solid tomato;-webkit-animation:spin3D 3s linear .2s infinite}.green-orbit[_ngcontent-%COMP%]{width:120px;height:120px;border:1px solid tomato;-webkit-animation:spin3D 2s linear 0s infinite}.red-orbit[_ngcontent-%COMP%]{width:90px;height:90px;border:1px solid tomato;-webkit-animation:spin3D 1s linear 0s infinite}.white-orbit[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid tomato;-webkit-animation:spin3D 10s linear 0s infinite}.w1[_ngcontent-%COMP%]{transform:rotate3D(1,1,1,90deg)}.w2[_ngcontent-%COMP%]{transform:rotate3D(1,2,.5,90deg)}.w3[_ngcontent-%COMP%]{transform:rotate3D(.5,1,2,90deg)}.three-quarter-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid #fb5b53;border-top:3px solid transparent;border-radius:50%;animation:spin .5s linear 0s infinite}@media only screen and (max-width: 768px){.resultSuccess[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:30px 25px}.certificateImage[_ngcontent-%COMP%]{width:100%}.details[_ngcontent-%COMP%]{float:none;text-align:center;width:100%;margin:30;margin-left:-20px;padding-left:none;border-left:none;padding-top:30px;border-top:1px solid #0001;display:flex;flex-direction:column;justify-content:center}.download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;background-color:tomato;border-color:tomato;color:#fff;letter-spacing:0;font-weight:700;padding:15px;margin-bottom:25px}.download[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px}.loadingText[_ngcontent-%COMP%]{display:none}}\"]\n  });\n  return VerifyCertDirectComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}